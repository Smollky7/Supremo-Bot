const Discord = require('discord.js')
module.exports = async (client, message, user, reaction) => {
  const messageTIcket = '908671779260747776'
  const messageVerific = '945152555489583114'
  const messageBotMap = '945364067432923146'
  const messageCarg = '916827800097394798'

  client.on('messageReactionAdd', async (reaction, user) => {
    if(user.bot) return; 
    if(reaction.message.id == messageTIcket && reaction.emoji.name == 'üì¨') {
      await reaction.users.remove(user);
         }
    if(reaction.message.id == messageTIcket && reaction.emoji.name == 'üìÉ') {
       await reaction.users.remove(user);
         }
    if(reaction.message.id == messageBotMap && reaction.emoji.name == '1Ô∏è‚É£') {
       await reaction.users.remove(user);
         }
     if(reaction.message.id == messageBotMap && reaction.emoji.name == '2Ô∏è‚É£') {
       await reaction.users.remove(user);
         }
    if(reaction.message.id == messageBotMap && reaction.emoji.name == '3Ô∏è‚É£') {
       await reaction.users.remove(user);
         }    
          })


  client.on('raw', async dados => {
    if(dados.t !== "MESSAGE_REACTION_ADD") return
  const msg = dados.d.message_id
  const serv = client.guilds.cache.get('759455771225358367')
 if(dados.d.message_id === messageTIcket){
    if(dados.t === "MESSAGE_REACTION_ADD"){

        if(dados.d.emoji.name === 'üì¨'){
 
          const membro = serv.members.cache.get(dados.d.user_id);
          const tick = serv.channels.cache.find(ch => ch.name.includes(`${membro.id}`));
          if (serv.channels.cache.find(ch1 => ch1.name.includes(`${membro.id}`)))
       return membro.send(new Discord.MessageEmbed()
       .setColor("WHITE")
       .setTitle(serv.name)
       .setDescription(`Ol√° ${membro}! o seu ticket j√° est√° aberto, inclusive eu at√© j√° mencionei voc√™ l√°!\n\nMais caso queira, clique aqui üëâ ${tick}\n\nE voc√™ ser√° direcionado automaticamente para l√°!`)
       .setFooter(`${serv.name} üî•`)
       .setThumbnail("https://cdn.discordapp.com/attachments/796831755800936489/804147129026478151/GIF-210127_212322.gif")
       .setTimestamp());

          serv.channels.create(`Ticket ‚Ä¢ ${membro.user.username}‚îá${membro.id}`,{
            type: 'text',
            parent: '908671109799497760',
            permissionOverwrites:[
                {
                    allow: ['VIEW_CHANNEL','READ_MESSAGE_HISTORY','EMBED_LINKS','ATTACH_FILES','SEND_MESSAGES'],
                    id: membro.id
                },
                {
                    deny: 'VIEW_CHANNEL',
                    id: serv.id
                }
            ]

        }).then(async ch => {
            ch.send(`<@${membro.id}>`, new Discord.MessageEmbed().setTitle("Boas vindas ao seu ticket").setDescription("Em alguns estantes um Developer ira lhe atender!").setColor("BLACK"));
            client.on('message', () => {
            })
        })
        };
        if(dados.d.emoji.name === 'üìÉ'){
          const serv = client.guilds.cache.get('759455771225358367')
          const membro = serv.members.cache.get(dados.d.user_id);
    const embedHelp = new Discord.MessageEmbed()
          .setColor('BLACK')
          .setDescription('Selecione o Servi√ßo que voc√™ que se informar\n 1Ô∏è‚É£ Cria√ß√£o de servidores de Minecraft;\n 2Ô∏è‚É£ Cria√ß√£o de Bot Discord;\n 3Ô∏è‚É£ Cria√ß√£o profissionais ou divulga√ß√£o de servidores Discord;\n 4Ô∏è‚É£ Edi√ß√£o de fotos;\n 5Ô∏è‚É£ Edi√ß√£o de videos;')
      membro.send(embedHelp).then(msgHelp =>{
        
        msgHelp.react("1Ô∏è‚É£")
        msgHelp.react("2Ô∏è‚É£")
        msgHelp.react("3Ô∏è‚É£")
        msgHelp.react("4Ô∏è‚É£")
        msgHelp.react("5Ô∏è‚É£")

            let minecraftFitro = (reaction, user) => reaction.emoji.name == "1Ô∏è‚É£" && user.id == membro.id;
            let botDcFitro = (reaction, user) => reaction.emoji.name == "2Ô∏è‚É£" && user.id == membro.id;
            let dcServerFitro = (reaction, user) => reaction.emoji.name == "3Ô∏è‚É£" && user.id == membro.id;
           let edicaodeFtFitro = (reaction, user) => reaction.emoji.name == "4Ô∏è‚É£" && user.id == membro.id;
           let edicaoDeVideoFitro = (reaction, user) => reaction.emoji.name == "5Ô∏è‚É£" && user.id == membro.id;
            
            let mineColetor = msgHelp.createReactionCollector(minecraftFitro);
            let botDcColetor = msgHelp.createReactionCollector(botDcFitro);
            let dcServerColetor = msgHelp.createReactionCollector(dcServerFitro);
        let edicaodeFtColetor = msgHelp.createReactionCollector(edicaodeFtFitro);
         let edicaoDeVideoColetor = msgHelp.createReactionCollector(edicaoDeVideoFitro);
        
        mineColetor.on('collect', () => {
          const mineEmbed = new Discord.MessageEmbed() 
               .setColor('WHITE')
               .setTitle('Servidores de Minecraft')
               .setDescription('J√° pensou em jogar com seus amigos em um servidor s√≥ seu, podendo costomizar e ser total dono dele? Aqui √© o lugar certo!\n\nFazemos:\nServidor Vanila por apenas R$ 30,00\nServidor Spigot/craftbukkit por apenas R$60,00\nNetwork por apenas R$160,00\n\nSendo apenas os pre√ßos iniciais ja que os servidores ser√£o customizados conforme a prefer√™ncia do cliente ent√£o ter√° custos adicionais ao decorrer do projeto.')

msgHelp.edit(mineEmbed).then(msgMine => {
  msgMine.react("üîÅ")
  
  let backFitro = (reaction, user) => reaction.emoji.name == "üîÅ" && user.id == membro.id;
            let backColetor = msgHelp.createReactionCollector(backFitro);

  backColetor.on('collect', () => {
      msgMine.edit(embedHelp)
})
})
        })
        botDcColetor.on('collect', () => {
          const embedBotDc = new Discord.MessageEmbed()
.setColor('WHITE')
.setTitle("Bot's Discord")
.setDescription('J√° pensou ter seu pr√≥prio bot no seu servidor Discord com todos os comandos que voc√™ desejar de modera√ß√£o, divers√£o e muitos outros?\nVoc√™ est√° no lugar certo!\n\nFazemos bot personalizado com a sua cara e com o objetivo certo que lhe agrada.\n\nO valor da compra varia com os comandos e com as especifica√ß√µes que voc√™ desejar, fazemos o pre√ßo certo e o ideal que cabe no seu bolso!')
          msgHelp.edit(embedBotDc).then(msgBotDc => {
      msgBotDc.react('üîÅ')
            let backFitro = (reaction, user) => reaction.emoji.name == "üîÅ" && user.id == membro.id;
            let backColetor = msgHelp.createReactionCollector(backFitro);

  backColetor.on('collect', () => {
      msgBotDc.edit(embedHelp)
})
          })
        
      })
          dcServerColetor.on('collect', () => {
          const embedBotDc = new Discord.MessageEmbed()
.setColor('WHITE')
.setTitle("Cria√ß√£o ou divulga√ß√£o de servidores Discord")
.setDescription('Voc√™ quer ter seu proprio servidor no Discord, podendo convidar seus amigos para jogar ou at√© bate aquele papo legal ou voc√™ pode ter seu proprio server, poder ter apoio dos bots supremos, todo profissional e poder crescer ele e se tornar talvez o melhor servidor mundo? Voc√™ veio ao lugar certo! Abra seu ticket e ajudaremos voc√™ nisso os pre√ßos s√£o definidos na hora com ate o compinado de ter disfun√ß√µes.')
          msgHelp.edit(embedBotDc).then(msgBotDc => {
      msgBotDc.react('üîÅ')
            let backFitro = (reaction, user) => reaction.emoji.name == "üîÅ" && user.id == membro.id;
            let backColetor = msgHelp.createReactionCollector(backFitro);

  backColetor.on('collect', () => {
      msgBotDc.edit(embedHelp)
})
          })
        
      })
      edicaodeFtColetor.on('collect', () => {
          const embedBotDc = new Discord.MessageEmbed()
.setColor('WHITE')
.setTitle("Edi√ß√µes de fotos")
.setDescription('Editamos suas fotos, fazemos flyes, bunner e tudo o que voc√™ desejar na sua foto ou propaganda, j√° os pre√ßos s√£o definidos na hora da edi√ß√£o.')
          msgHelp.edit(embedBotDc).then(msgBotDc => {
      msgBotDc.react('üîÅ')
            let backFitro = (reaction, user) => reaction.emoji.name == "üîÅ" && user.id == membro.id;
            let backColetor = msgHelp.createReactionCollector(backFitro);

  backColetor.on('collect', () => {
      msgBotDc.edit(embedHelp)
})
          })
        
      })
      edicaoDeVideoColetor.on('collect', () => {
          const embedBotDc = new Discord.MessageEmbed()
.setColor('WHITE')
.setTitle("Edi√ß√µes de videos")
.setDescription('Editamos seus videos do jeito que preferir, com efeitos e at√© videos para o Youtube, o pre√ßo √© definido conforme seja suas exig√™ncias e o pruto do video.')
          msgHelp.edit(embedBotDc).then(msgBotDc => {
      msgBotDc.react('üîÅ')
            let backFitro = (reaction, user) => reaction.emoji.name == "üîÅ" && user.id == membro.id;
            let backColetor = msgHelp.createReactionCollector(backFitro);

  backColetor.on('collect', () => {
      msgBotDc.edit(embedHelp)
})
          })
        
      })

            })
        };

    };
};

 if(dados.d.message_id === messageVerific){
   if(dados.t === "MESSAGE_REACTION_ADD"){

        if(dados.d.emoji.name === '‚úÖ'){
          const rolesADD = serv.roles.cache.get('801489328903684138')
          const membro = serv.members.cache.get(dados.d.user_id);
          
          membro.roles.add(rolesADD)
        };
      
   }
 }
 if(dados.d.message_id === messageBotMap){
   if(dados.t === "MESSAGE_REACTION_ADD"){

      if(dados.d.emoji.name === '1Ô∏è‚É£'){
          let rolesADD = serv.roles.cache.get('945358631405252709')
          const membro = serv.members.cache.get(dados.d.user_id);
          
          membro.roles.add(rolesADD)
        };
      if(dados.d.emoji.name === 'Ô∏è2Ô∏è‚É£'){
          let rolesADD = serv.roles.cache.get('945359175251283988')
          const membro = serv.members.cache.get(dados.d.user_id);
          
          membro.roles.add(rolesADD)
        };
      if(dados.d.emoji.name === '3Ô∏è‚É£'){
          let rolesADD = serv.roles.cache.get('945358976604856331')
          const membro = serv.members.cache.get(dados.d.user_id);
          
          membro.roles.add(rolesADD)
        };
   }
 }

//Ticket
/*
 if(dados.d.message_id === messageCarg){
    if(dados.t === "MESSAGE_REACTION_ADD"){
      if(dados.d.emoji.name === 'üì®'){
          const membro = serv.members.cache.get(dados.d.user_id);
          const tick = serv.channels.cache.find(ch => ch.name.includes(`${membro.id}`));
          if (serv.channels.cache.find(ch1 => ch1.name.includes(`${membro.id}`)))
       return membro.send(new Discord.MessageEmbed()
       .setColor("WHITE")
       .setTitle(serv.name)
       .setDescription(`Ol√° ${membro}! o seu ticket j√° est√° aberto, inclusive eu at√© j√° mencionei voc√™ l√°!\n\nMais caso queira, clique aqui üëâ ${tick}\n\nE voc√™ ser√° direcionado automaticamente para l√°!`)
       .setFooter(`${serv.name} üî•`)
       .setThumbnail("https://cdn.discordapp.com/attachments/796831755800936489/804147129026478151/GIF-210127_212322.gif")
       .setTimestamp());

          serv.channels.create(`Ticket ‚Ä¢ ${membro.user.username}‚îá${membro.id}`,{
            type: 'text',
            parent: '908671109799497760',
            permissionOverwrites:[
                {
                    allow: ['VIEW_CHANNEL','READ_MESSAGE_HISTORY','EMBED_LINKS','ATTACH_FILES','SEND_MESSAGES'],
                    id: membro.id
                },
                {
                    deny: 'VIEW_CHANNEL',
                    id: serv.id
                }
            ]

        }).then(async ch => {
            ch.send(`<@${membro.id}>`, new Discord.MessageEmbed().setTitle("Boas vindas ao seu ticket").setDescription("Em alguns estantes um Developer ira lhe atender!").setColor("BLACK"));
        })

      }
    }}

*/

});












}
